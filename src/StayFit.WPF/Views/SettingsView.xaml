<UserControl x:Class="StayFit.WPF.Views.SettingsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        d:DesignHeight="600"
        d:DesignWidth="500"
        Background="#F5F5F5">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <TextBlock Grid.Row="0" 
                       Text="ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð¿Ñ€Ð¾Ñ„Ñ–Ð»ÑŽ"
                       FontSize="24"
                       FontWeight="Bold"
                       Foreground="#2E7D32"
                       Margin="0,0,0,30"/>

            <!-- Ð¡ÐµÐºÑ†Ñ–Ñ: Ð¤Ñ–Ð·Ð¸Ñ‡Ð½Ñ– Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ -->
            <Border Grid.Row="1" 
                    Background="White" 
                    CornerRadius="8" 
                    Padding="20"
                    Margin="0,0,0,20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
                </Border.Effect>
                
                <StackPanel>
                    <TextBlock Text="Ð¤Ñ–Ð·Ð¸Ñ‡Ð½Ñ– Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸" 
                               FontSize="18" 
                               FontWeight="SemiBold"
                               Foreground="#333"
                               Margin="0,0,0,15"/>

                    <!-- Ð—Ñ€Ñ–ÑÑ‚ -->
                    <StackPanel Margin="0,0,0,15">
                        <TextBlock Text="Ð—Ñ€Ñ–ÑÑ‚ (ÑÐ¼)" 
                                   FontSize="14" 
                                   Foreground="#666"
                                   Margin="0,0,0,5"/>
                        <TextBox x:Name="TxtHeight"
                                 Text="{Binding Height, UpdateSourceTrigger=PropertyChanged}"
                                 FontSize="14"
                                 Padding="10"
                                 Height="40"/>
                    </StackPanel>

                    <!-- ÐŸÐ¾Ñ‚Ð¾Ñ‡Ð½Ð° Ð²Ð°Ð³Ð° -->
                    <StackPanel Margin="0,0,0,15">
                        <TextBlock Text="ÐŸÐ¾Ñ‚Ð¾Ñ‡Ð½Ð° Ð²Ð°Ð³Ð° (ÐºÐ³)" 
                                   FontSize="14" 
                                   Foreground="#666"
                                   Margin="0,0,0,5"/>
                        <TextBox x:Name="TxtWeight"
                                 Text="{Binding Weight, UpdateSourceTrigger=PropertyChanged}"
                                 FontSize="14"
                                 Padding="10"
                                 Height="40"/>
                    </StackPanel>

                    <!-- Ð¦Ñ–Ð»ÑŒÐ¾Ð²Ð° Ð²Ð°Ð³Ð° -->
                    <StackPanel Margin="0,0,0,0">
                        <TextBlock Text="Ð¦Ñ–Ð»ÑŒÐ¾Ð²Ð° Ð²Ð°Ð³Ð° (ÐºÐ³)" 
                                   FontSize="14" 
                                   Foreground="#666"
                                   Margin="0,0,0,5"/>
                        <TextBox x:Name="TxtTargetWeight"
                                 Text="{Binding TargetWeight, UpdateSourceTrigger=PropertyChanged}"
                                 FontSize="14"
                                 Padding="10"
                                 Height="40"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Ð¡ÐµÐºÑ†Ñ–Ñ: Ð Ñ–Ð²ÐµÐ½ÑŒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ñ– -->
            <Border Grid.Row="2" 
                    Background="White" 
                    CornerRadius="8" 
                    Padding="20"
                    Margin="0,0,0,20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
                </Border.Effect>
                
                <StackPanel>
                    <TextBlock Text="Ð Ñ–Ð²ÐµÐ½ÑŒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ñ–" 
                               FontSize="18" 
                               FontWeight="SemiBold"
                               Foreground="#333"
                               Margin="0,0,0,15"/>

                    <ComboBox x:Name="CmbActivityLevel"
                              SelectedValue="{Binding ActivityLevel, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Tag"
                              FontSize="14"
                              Height="40"
                              Padding="10">
                        <ComboBoxItem Content="Ð¡Ð¸Ð´ÑÑ‡Ð¸Ð¹ ÑÐ¿Ð¾ÑÑ–Ð± Ð¶Ð¸Ñ‚Ñ‚Ñ" Tag="SEDENTARY"/>
                        <ComboBoxItem Content="Ð›ÐµÐ³ÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ (1-3 Ñ€Ð°Ð·Ð¸/Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ)" Tag="LIGHTLY_ACTIVE"/>
                        <ComboBoxItem Content="ÐŸÐ¾Ð¼Ñ–Ñ€Ð½Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ (3-5 Ñ€Ð°Ð·Ñ–Ð²/Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ)" Tag="MODERATELY_ACTIVE"/>
                        <ComboBoxItem Content="Ð’Ð¸ÑÐ¾ÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ (6-7 Ñ€Ð°Ð·Ñ–Ð²/Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ)" Tag="VERY_ACTIVE"/>
                        <ComboBoxItem Content="Ð”ÑƒÐ¶Ðµ Ð²Ð¸ÑÐ¾ÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ (2 Ñ€Ð°Ð·Ð¸/Ð´ÐµÐ½ÑŒ)" Tag="EXTRA_ACTIVE"/>
                    </ComboBox>
                </StackPanel>
            </Border>

            <!-- Ð¡ÐµÐºÑ†Ñ–Ñ: Ð Ð¾Ð·Ñ€Ð°Ñ…Ð¾Ð²Ð°Ð½Ñ– Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ (Readonly) -->
            <Border Grid.Row="3" 
                    Background="#E8F5E9" 
                    CornerRadius="8" 
                    Padding="20"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Ð’Ð°ÑˆÑ– Ð¿Ð¾ÐºÐ°Ð·Ð½Ð¸ÐºÐ¸" 
                               FontSize="18" 
                               FontWeight="SemiBold"
                               Foreground="#2E7D32"
                               Margin="0,0,0,15"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- BMI -->
                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="BMI" 
                                       FontSize="12" 
                                       Foreground="#666"
                                       Margin="0,0,0,5"/>
                            <TextBlock x:Name="TxtBmi"
                                       Text="{Binding Bmi, StringFormat={}{0:F1}}"
                                       FontSize="20"
                                       FontWeight="Bold"
                                       Foreground="#2E7D32"/>
                        </StackPanel>

                        <!-- BMR -->
                        <StackPanel Grid.Column="1" Margin="0,0,10,0">
                            <TextBlock Text="BMR (ÐºÐºÐ°Ð»)" 
                                       FontSize="12" 
                                       Foreground="#666"
                                       Margin="0,0,0,5"/>
                            <TextBlock x:Name="TxtBmr"
                                       Text="{Binding Bmr, StringFormat={}{0:F0}}"
                                       FontSize="20"
                                       FontWeight="Bold"
                                       Foreground="#2E7D32"/>
                        </StackPanel>

                        <!-- TDEE -->
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="TDEE (ÐºÐºÐ°Ð»)" 
                                       FontSize="12" 
                                       Foreground="#666"
                                       Margin="0,0,0,5"/>
                            <TextBlock x:Name="TxtTdee"
                                       Text="{Binding Tdee, StringFormat={}{0:F0}}"
                                       FontSize="20"
                                       FontWeight="Bold"
                                       Foreground="#2E7D32"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="* BMI - Ð†Ð½Ð´ÐµÐºÑ Ð¼Ð°ÑÐ¸ Ñ‚Ñ–Ð»Ð° | BMR - Ð‘Ð°Ð·Ð¾Ð²Ð¸Ð¹ Ð¼ÐµÑ‚Ð°Ð±Ð¾Ð»Ñ–Ð·Ð¼ | TDEE - Ð”ÐµÐ½Ð½Ð° Ð½Ð¾Ñ€Ð¼Ð° ÐºÐ°Ð»Ð¾Ñ€Ñ–Ð¹"
                               FontSize="10"
                               Foreground="#999"
                               TextWrapping="Wrap"
                               Margin="0,10,0,0"/>
                </StackPanel>
            </Border>

            <!-- Error Ñ‚Ð° Success Messages -->
            <StackPanel Grid.Row="4" Margin="0,0,0,20">
                <TextBlock x:Name="TxtError"
                           Text="{Binding ErrorMessage}"
                           Foreground="Red"
                           FontSize="14"
                           TextWrapping="Wrap"
                           Margin="0,0,0,10"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"/>
                
                <TextBlock x:Name="TxtSuccess"
                           Text="{Binding SuccessMessage}"
                           Foreground="Green"
                           FontSize="14"
                           TextWrapping="Wrap"
                           Margin="0,0,0,10"
                           Visibility="{Binding SuccessMessage, Converter={StaticResource StringToVisibilityConverter}}"/>
            </StackPanel>
            <!-- Ð¡ÐµÐºÑ†Ñ–Ñ: Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ñ–Ñ— -->
            <Border Grid.Row="4" 
                    Background="#FFF3E0" 
                    CornerRadius="8" 
                    Padding="20"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ñ–Ñ—" 
                              FontSize="18" 
                              FontWeight="SemiBold"
                              Foreground="#E65100"
                              Margin="0,0,0,15"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- BMI Ð¡Ñ‚Ð°Ñ‚ÑƒÑ -->
                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ BMI" 
                                      FontSize="12" 
                                      Foreground="#666"
                                      Margin="0,0,0,5"/>
                            <TextBlock Text="{Binding BmiStatus}"
                                      FontSize="16"
                                      FontWeight="Bold"
                                      Foreground="#E65100"
                                      TextWrapping="Wrap"/>
                        </StackPanel>

                        <!-- Ð¦Ñ–Ð»ÑŒ -->
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Ð’Ð°ÑˆÐ° Ñ†Ñ–Ð»ÑŒ" 
                                      FontSize="12" 
                                      Foreground="#666"
                                      Margin="0,0,0,5"/>
                            <TextBlock Text="{Binding GoalStatus}"
                                      FontSize="16"
                                      FontWeight="Bold"
                                      Foreground="#E65100"
                                      TextWrapping="Wrap"/>
                        </StackPanel>
                    </Grid>

                    <Border Background="#FFE0B2" 
                            CornerRadius="4" 
                            Padding="15"
                            Margin="0,15,0,0">
                        <StackPanel>
                            <TextBlock Text="ðŸ’¡ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð¾Ð²Ð°Ð½Ð° Ð´ÐµÐ½Ð½Ð° Ð½Ð¾Ñ€Ð¼Ð° ÐºÐ°Ð»Ð¾Ñ€Ñ–Ð¹:" 
                                      FontSize="14" 
                                      Foreground="#E65100"
                                      Margin="0,0,0,5"/>
                            <TextBlock FontSize="24"
                                      FontWeight="Bold"
                                      Foreground="#E65100">
                                <Run Text="{Binding RecommendedCalories, StringFormat={}{0:F0}, Mode=OneWay}"/>
                                <Run Text=" ÐºÐºÐ°Ð»/Ð´ÐµÐ½ÑŒ" FontSize="16"/>
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð—Ð±ÐµÑ€ÐµÐ³Ñ‚Ð¸ -->
            <Button Grid.Row="5"
                    x:Name="BtnSave"
                    Content="Ð—Ð‘Ð•Ð Ð•Ð“Ð¢Ð˜"
                    Command="{Binding UpdateProfileCommand}" Click="BtnSave_Click"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Height="50"
                    Background="#4CAF50"
                    Foreground="White"
                    BorderThickness="0"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#4CAF50"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="8"
                                            Padding="20,0">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#45A049"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#388E3C"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </ScrollViewer>
</UserControl>